/* Retro ZX Spectrum theme scoped to body.retro */
:root{
    /* ZX Spectrum color palette */
    --zx-black:#000;
    --zx-blue:#0000D7;
    --zx-red:#D70000;
    --zx-magenta:#D700D7;
    --zx-green:#00D700;
    --zx-cyan:#00D7D7;
    --zx-yellow:#D7D700;
    --zx-white:#FFF;
    --zx-bright-cyan:#00FFFF;
    
    /* Responsive breakpoints */
    --breakpoint-mobile: 480px;
    --breakpoint-small: 640px;
    --breakpoint-medium: 768px;
    
    /* Common spacing values */
    --spacing-small: 0.6em;
    --spacing-medium: 0.9em;
    --spacing-large: 1.2em;
}

body.retro{
    font-family: 'Press Start 2P', 'Courier New', monospace;
    /* Responsive base font-size: small on mobile, larger on desktop */
    font-size: clamp(12px, 2.2vw, 15px);
    /* Slightly more vertical breathing space for readability */
    line-height: 1.6;
    background: var(--zx-black);
    color: var(--zx-white);
}

/* CRT scanlines overlay (only visible when retro active) */
body.retro::before{
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0) 0px,
        rgba(0,0,0,0) 1px,
        rgba(0,0,0,0.08) 2px,
        rgba(0,0,0,0.08) 3px
    );
    z-index: 9999;
}

/* Container styling */
body.retro .container{
    max-width:100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    margin-bottom: 0;
    background:var(--zx-black);
    border:none;
    padding:22px;
    box-shadow:none;
    min-height:100vh;
}

body.retro h1{
    color:var(--zx-bright-cyan);
    text-shadow:2px 2px var(--zx-magenta);
    /* Use clamp so the title is readable on all devices */
    font-size: clamp(1.1rem, 3.5vw, 1.6rem);
    line-height:1.2;
}



body.retro .intro-text{color:var(--zx-yellow); font-style:italic}

body.retro .emulator-container{background:var(--zx-black); border:4px solid var(--zx-magenta); display:flex; justify-content:center; align-items:center}

body.retro .dropdown-header, body.retro .dropdown-options{
    background:var(--zx-blue);
    color:var(--zx-white);
    border:3px solid var(--zx-yellow);
    border-radius:0;
}

body.retro .dropdown-category{background:var(--zx-magenta); color:var(--zx-yellow)}
body.retro .dropdown-option{background:var(--zx-blue); color:var(--zx-white)}
body.retro .dropdown-option.selected, body.retro .dropdown-option:hover{background:var(--zx-magenta); color:var(--zx-yellow)}

body.retro .load-button{background:var(--zx-green); color:var(--zx-black); border:3px solid var(--zx-yellow); font-family:inherit}
body.retro .load-button:hover{background:var(--zx-yellow); color:var(--zx-red)}

body.retro .instructions{background:var(--zx-blue); color:var(--zx-white); border-left:6px solid var(--zx-magenta); font-size: clamp(11px, 2.0vw, 13px); line-height:1.45}

/* subtle responsive tweaks */
@media (max-width:600px){
    body.retro .container{
        margin-left: auto;
        margin-right: auto;
        margin-top: 0;
        margin-bottom: 0;
        padding:10px;
    }
    body.retro h1{font-size:1.1rem}
    body.retro .instructions { font-size: clamp(10px, 3.6vw, 12px); padding: 8px; }
}

/* Toggle switch styles */
.switch{position:relative; width:42px; height:22px}
.switch input{opacity:0; width:0; height:0; position:absolute}
.switch .switch-track{display:block; width:100%; height:100%; background:var(--zx-black); border:3px solid var(--zx-yellow); border-radius:4px; position:relative; cursor:pointer}
.switch .switch-track::after{content:""; position:absolute; width:14px; height:14px; left:3px; top:3px; background:var(--zx-yellow); border-radius:2px; transition:left 0.12s ease, background 0.12s ease}
.switch input:checked + .switch-track{background:var(--zx-yellow)}
.switch input:checked + .switch-track::after{left:22px; background:var(--zx-black)}
.switch input:focus + .switch-track{outline:2px solid var(--zx-magenta)}


/* Improve spacing for lists and list items in retro mode to help wrapped lines */
body.retro ul,
body.retro ol {
    padding-left: 1.1em;
    margin-top: var(--spacing-small);
    margin-bottom: var(--spacing-medium);
}

body.retro ul li,
body.retro ol li {
    line-height: 1.9;
    margin-bottom: var(--spacing-small);
}

/* If list items contain multiple lines, ensure the second line aligns with the text, not the bullet */
body.retro ul li::marker,
body.retro ol li::marker {
    font-size: 0.9em;
}

/* Subsection titles (h2/h3) in retro mode: pink/magenta spectrum look */
body.retro h2,
body.retro h3 {
    color: var(--zx-yellow);
    text-shadow: 1px 1px var(--zx-red);
    font-size: clamp(0.9rem, 2.8vw, 1.1rem);
    margin-top: var(--spacing-medium);
    margin-bottom: var(--spacing-small);
}

/* Align and indent lists: shift slightly to the right and make markers align */
body.retro ul,
body.retro ol {
    padding-left: 2.2em;
}

body.retro ul li,
body.retro ol li {
    text-indent: -0.9em;
    padding-left: 0.9em;
}

/* Use the native decimal marker but style ::marker for consistent font/color
   and adjust padding to create a comfortable gutter for numbers. This is
   simpler and more compatible across browsers than absolute-positioned markers. */
/* Ordered lists: use a grid so numbers sit in their own column and wrapped
   lines align consistently. We render the counter via ::before for full
   control over font, color and spacing. */
body.retro ol {
    list-style: none;
    counter-reset: retro-ol;
    padding-left: 0;
    margin-top: var(--spacing-small);
    margin-bottom: var(--spacing-medium);
}

body.retro ol li {
    counter-increment: retro-ol;
    display: grid;
    grid-template-columns: 2.6em 1fr 10.5em;
    column-gap: var(--spacing-small);
    align-items: start;
    margin-bottom: var(--spacing-small);
}

body.retro ol li::before {
    content: counter(retro-ol) ".";
    display: block;
    text-align: right;
    font-family: 'Press Start 2P', monospace;
    color: var(--zx-cyan);
    font-size: 0.95em;
    padding-right: 0.4em;
}

/* Prevent inline code snippets inside list items from wrapping across lines */
body.retro ol li code,
body.retro ol li kbd {
    white-space: nowrap;
    display: inline-block;
    grid-column: 3 / 4;
    justify-self: end;
}

/* Responsive: on small screens, collapse the third column below the content */
@media (max-width: 640px) {
    /* On small screens, fall back to native list rendering so the whole
       list item (number + text + commands) flows and wraps together.
       Hide the custom ::before counter and enable native markers inside
       the content. */
    body.retro ol {
        list-style: decimal inside;
        padding-left: var(--spacing-small);
    }

    body.retro ol li {
        display: list-item;
        grid-template-columns: none;
        column-gap: 0;
        grid-auto-rows: none;
        margin-bottom: var(--spacing-small);
        padding-left: 0;
    }

    /* Remove the generated counter on small screens */
    body.retro ol li::before {
        content: none;
    }

    body.retro ol li code,
    body.retro ol li kbd {
        white-space: normal;
        display: inline;
        word-break: break-word;
    }
}


